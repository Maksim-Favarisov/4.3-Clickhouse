<h1 align="center">
üóÑÔ∏è –ó–∞–¥–∞–Ω–∏–µ –ø–æ ClickHouse
</h1>

<h3 align="center">
üìä –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
</h3>

---

## üë®‚Äçüíª –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

–í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–π –∫–æ–º–∞–Ω–¥–µ. –£ –≤–∞—Å –µ—Å—Ç—å —Å–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ ClickHouse.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**

- üíæ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—ã—Ä—ã–µ –ª–æ–≥–∏ —Å–æ–±—ã—Ç–∏–π** —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º 30 –¥–Ω–µ–π
- üìà **–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É** —Å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º 180 –¥–Ω–µ–π –¥–ª—è —Ç—Ä–µ–Ω–¥–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- üîÑ **–°–æ–∑–¥–∞—Ç—å Materialized View** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
- üìä **–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ Retention** –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –¥–Ω—è–º

---

## üìã –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

### üóÉÔ∏è 1. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—ã—Ä—ã—Ö –ª–æ–≥–æ–≤ —Å–æ–±—ã—Ç–∏–π

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –°—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü—ã `user_events`
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è **30 –¥–Ω–µ–π**

### üìä 2. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã

**–ê–≥—Ä–µ–≥–∞—Ç—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è (180 –¥–Ω–µ–π):**
- üë• –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ `event_type` –∏ `event_date`
- üí∞ –°—É–º–º–∞ –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤
- üî¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π

### üîÑ 3. –°–æ–∑–¥–∞–Ω–∏–µ Materialized View

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü—É —Å—ã—Ä—ã—Ö –ª–æ–≥–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
  - `sumState`
  - `uniqState` 
  - `countState`

### üìà 4. –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ Retention

**–ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:**
- `total_users_day_0` - –≤—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –¥–µ–Ω—å 0
- `returned_in_7_days` - –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 7 –¥–Ω–µ–π
- `retention_7d_percent` - –ø—Ä–æ—Ü–µ–Ω—Ç Retention –∑–∞ 7 –¥–Ω–µ–π

> **‚ÑπÔ∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Retention —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏—Ö 7 –¥–Ω–µ–π –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤–∏–∑–∏—Ç–∞.

### üìã 5. –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –ø–æ –¥–Ω—è–º

**–§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–Ω—è–º
- –ë—ã—Å—Ç—Ä–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
